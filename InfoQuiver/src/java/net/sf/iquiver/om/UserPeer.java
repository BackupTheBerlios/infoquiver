package net.sf.iquiver.om;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.apache.torque.TorqueException;
import org.apache.torque.util.Criteria;

/**
 * The skeleton for this class was autogenerated by Torque on:
 *
 * [Thu Mar 04 20:15:14 CET 2004]
 *
 *  You should add additional methods to this class to meet the
 *  application requirements.  This class will only be generated as
 *  long as it does not already exist in the output directory.
 */
public class UserPeer
    extends net.sf.iquiver.om.cache.CacheBackedUserPeer
{
	final private static Log logger = LogFactory.getLog(UserPeer.class);
	
    public static User doLogin(long clientId, String username, String password)
    {
        User user = null;
        Criteria crit = new Criteria();
        crit.add(UserPeer.CLIENT_ID, clientId);
        crit.add(UserPeer.USER_LOGIN, username);
        crit.add(UserPeer.USER_PASSWORD, password);
        
        try
        {
            user = (User)doSelect(crit).get(0); 
        }
        catch ( TorqueException e )
        {            
            logger.error("Database error while fetching user \"" + username + "\"", e);
        }
        catch ( NullPointerException e )
        {
            // do nothing
        }
        
        return user;
    }
	
}